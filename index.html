<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Emily’s Cat</title>
<style>
  html, body { height:100%; margin:0; }
  body{
    background:#f2f2f2;
    display:flex; flex-direction:column;
    align-items:center; justify-content:center;
    gap:16px;
    font-family:system-ui, sans-serif;
  }
  canvas{
    image-rendering: pixelated;
    background:#fff;
    border:1px solid #ddd;
  }
  .button-row{
    display:flex;
    gap:20px;
    justify-content:center;
  }
  /* image buttons */
  .btn {
    width:72px; height:72px;
    border:2px solid #333; border-radius:6px;
    background:#f2f2f2 center / contain no-repeat;
    cursor:pointer; font-size:14px;
    display:flex; align-items:flex-end; justify-content:center;
    padding-bottom:6px;
  }
  .btn:focus { outline: none; }
  .btn:hover { background-color:#eaeaea; }

  /* IMPORTANT: match EXACT file names (case sensitive) */
  .btn-kimchi { background-image:url('Kimchi.png'); }
  .btn-vodka  { background-image:url('vodka.png'); }
</style>
</head>
<body>

<canvas id="game" width="128" height="128"></canvas>

<div class="button-row">
  <button class="btn btn-kimchi" title="Kimchi" onclick="showKimchi()">Kimchi</button>
  <button class="btn btn-vodka"  title="Vodka"  onclick="showIdle()">Vodka</button>
</div>

<script>
  // ===== Sprite settings (match your sheet) =====
  const FRAME_W = 64;     // each frame width
  const FRAME_H = 64;     // each frame height
  const FPS      = 6;     // animation speed
  const SCALE    = 2;     // draw bigger on the canvas

  const canvas = document.getElementById('game');
  const ctx    = canvas.getContext('2d');

  // State for current animation
  const state = {
    img: null,
    totalFrames: 4, // <-- set to the actual number of frames in Normalidle.png
    frame: 0,
    tick: 0,
    ticksPerFrame: Math.max(1, Math.round(60 / FPS)),
    frameWidth: FRAME_W,
    frameHeight: FRAME_H
  };

  function loop(){
    requestAnimationFrame(loop);

    // advance frames on a simple timer
    state.tick++;
    if (state.tick >= state.ticksPerFrame){
      state.tick = 0;
      state.frame = (state.frame + 1) % state.totalFrames;
    }

    // clear and draw current frame, scaled
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // center the cat on canvas
    const drawW = state.frameWidth * SCALE;
    const drawH = state.frameHeight * SCALE;
    const dx = (canvas.width - drawW) / 2;
    const dy = (canvas.height - drawH) / 2;

    const sx = state.frame * state.frameWidth;
    ctx.imageSmoothingEnabled = false;
    ctx.drawImage(state.img, sx, 0, state.frameWidth, state.frameHeight, dx, dy, drawW, drawH);
  }

  function playSprite(src, totalFrames){
    const img = new Image();
    img.onload = () => {
      state.img = img;
      state.totalFrames = totalFrames;
      state.frame = 0;
      state.tick = 0;
    };
    img.src = src;
  }

  // ——— Buttons ———
  function showKimchi(){
    // when you export the eating animation sprite sheet, update the file name & frame count here
    playSprite('Normalidle.png', state.totalFrames); // placeholder until you add kimchi sheet
  }
  function showIdle(){
    playSprite('Normalidle.png', state.totalFrames);
  }

  // Start idle as soon as page loads
  window.addEventListener('load', () => {
    // IMPORTANT: Filename must exactly match what’s in your repo: "Normalidle.png"
    playSprite('Normalidle.png', 4); // change 4 to however many frames Normalidle.png has
    loop();
  });
</script>
</body>
</html>
